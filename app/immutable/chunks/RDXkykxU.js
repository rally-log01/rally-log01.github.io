import{d as S,w as g}from"./hvjgpIH3.js";import{A as I}from"./BRW6KpP9.js";var t=(e=>(e.UnAuthenticated="un-authenticated",e.Authenticated="authenticated",e.Admin="admin",e.Root="root",e))(t||{});const l={username:"User",role:t.UnAuthenticated},b={username:"Admin",role:t.Admin},y={username:"Root",role:t.Root},R=[{label:"Home",url:"/home",roles:[t.UnAuthenticated,t.Authenticated,t.Admin,t.Root],index:1},{label:"Players",url:"/players",roles:[t.UnAuthenticated,t.Authenticated,t.Admin,t.Root],index:1},{label:"Matches",url:"/matches",roles:[t.UnAuthenticated,t.Authenticated,t.Admin,t.Root],index:1},{label:"Statistics",url:"/stats",roles:[t.UnAuthenticated,t.Authenticated,t.Admin,t.Root],index:1}];function w(e){const i=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&i==="[object Date]"?new e.constructor(+e):typeof e=="number"||i==="[object Number]"||typeof e=="string"||i==="[object String]"?new Date(e):new Date(NaN)}function N(e){return w(e).getDay()===0}const E=()=>{const{stores:{currentUser:e},actions:{init:i}}=T();i();const s=I(e);let r=[];r=[...r,...R];const u=(o,a)=>o&&o.find(f=>f.role===a)?.sundayOnly?N(new Date):!0;return r.filter(o=>{const a=s.role,h=!!o.roles.find(U=>U===a),f=u(o.visibilities,a);return h&&f}).sort((o,a)=>o.index-a.index)};async function p(e){function i(o){return Array.from(new Uint8Array(o)).map(a=>a.toString(16).padStart(2,"0")).join("")}const r=new TextEncoder().encode(e),u=await crypto.subtle.digest("SHA-256",r);return i(u)}let m=null;const O=()=>{const e=g(!0),i=g("Home"),s=g(!1),r=g(l),u=S([r],([n])=>n.role===t.Admin||n.role===t.Root),o=S([r],([n])=>n.role===t.Admin),a=S([r],([n])=>n.role===t.Root);return m={stores:{darkTheme:e,pageName:i,authenticated:s,currentUser:r,currentUserIsAdmin:o,currentUserIsRoot:a,currentUserIsRootOrAdmin:u},actions:{init:()=>{const n=localStorage.getItem("theme"),c=n??"light";e.set(n==="dark"),document.documentElement.setAttribute("data-bs-theme",c),localStorage.setItem("theme",c);const d=localStorage.getItem("currentUser"),A=d?JSON.parse(d):l;switch(r.set(A),localStorage.setItem("currentUser",JSON.stringify(A)),A.username){case b.username:case y.username:s.set(!0);break;case l.username:default:s.set(!1)}},toggleTheme:()=>{const n=localStorage.getItem("theme");let c="light";n==="light"&&(c="dark"),e.set(c==="dark"),document.documentElement.setAttribute("data-bs-theme",c),localStorage.setItem("theme",c)},login:async(n,c)=>{const d=n.toLowerCase().trim();return d==="admin"&&await p(c)==="2566c0e434cf6099613dc50de36e61f0503272c3ed76e699fcbb3ff9c7b9713c"?(r.set(b),s.set(!0),localStorage.setItem("currentUser",JSON.stringify(b)),!0):d==="root"&&await p(c)==="2566c0e434cf6099613dc50de36e61f0503272c3ed76e699fcbb3ff9c7b9713c"?(r.set(y),s.set(!0),localStorage.setItem("currentUser",JSON.stringify(y)),!0):(localStorage.setItem("currentUser",JSON.stringify(l)),r.set(l),s.set(!1),!1)},logout:()=>{s.set(!1),localStorage.setItem("currentUser",JSON.stringify(l)),r.set(l)}}},m},T=()=>(m||(m=O()),m);export{t as U,E as a,T as g};
