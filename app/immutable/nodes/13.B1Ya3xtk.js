import{z as Se,s as ee,n as P,d as T,i as A,B as $e,Y as ve,y as Ve,Z as Ue,L as Ae,b as u,e as _,o as q,h as g,p as X,t as x,l as ie,m as f,H as V,q as M,f as O,v as S,r as He,I as z,K as se,_ as Be,w as Le,$ as Ne,G as pe,a0 as he}from"../chunks/Cc-JFjHS.js";import{S as te,i as ne,f as _e,d as G,t as K,a as Q,m as Y,b as Z,e as J}from"../chunks/D5HXnv3a.js";import{P as Oe}from"../chunks/4WMpr6LH.js";import{e as ke}from"../chunks/C7w706Ku.js";import{w as ge,d as Pe}from"../chunks/DuVhptrD.js";import{s as ce,D as je,o as Fe}from"../chunks/Dn9IAbVG.js";import{c as Re,a as qe,b as ze}from"../chunks/DFm_VRbm.js";const Ge=!0,wt=Object.freeze(Object.defineProperty({__proto__:null,prerender:Ge},Symbol.toStringTag,{value:"Module"})),be=ge([]);let de=!1;async function me(){if(de)return Se(be);de=!0;const{data:a,error:e}=await ce.from("tournaments").select("*").order("name",{ascending:!0});if(e)throw e;const n=a||[];return be.set(n),setTimeout(()=>de=!1,800),n}async function Ke(a){const{data:e,error:n}=await ce.from("tournaments").insert([a]).select();if(n)throw n;return await me(),e[0]}async function Qe(a,e){const{error:n}=await ce.from("tournaments").update(e).eq("id",a);if(n)throw n;await me();const r=Se(be).find(s=>s.id===a);return r||void 0}async function Ye(a){const{error:e}=await ce.from("tournaments").delete().eq("id",a);if(e)throw e;await me()}let W=null;const Ze=()=>{const a=ge([]),e=ge(void 0),n=Pe([a,e],([l,c])=>{if(l?.length&&c)return l.find(h=>h.id===c)});return W={stores:{data:a,currentTournamentId:e,currentTournament:n},actions:{reload:async()=>{const l=await me();a.set(l)},createTournament:async l=>{try{await Ke(l)}catch(c){console.error(c)}},updateTournament:async(l,c)=>{try{await Qe(l,c)}catch(h){console.error(h)}},deleteTournament:async l=>{try{await Ye(l)}catch(c){console.error(c)}}}},W},le=()=>(W||(W=Ze()),W);function Ce(a,e,n){const t=a.slice();return t[10]=e[n],t}function Je(a){let e;return{c(){e=x("No Data Found")},l(n){e=X(n,"No Data Found")},m(n,t){A(n,e,t)},p:P,d(n){n&&T(e)}}}function We(a){let e,n=ke(a[0]),t=[];for(let r=0;r<n.length;r+=1)t[r]=De(Ce(a,n,r));return{c(){e=g("ul");for(let r=0;r<t.length;r+=1)t[r].c();this.h()},l(r){e=_(r,"UL",{class:!0});var s=q(e);for(let o=0;o<t.length;o+=1)t[o].l(s);s.forEach(T),this.h()},h(){u(e,"class","list-group")},m(r,s){A(r,e,s);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null)},p(r,s){if(s&3){n=ke(r[0]);let o;for(o=0;o<n.length;o+=1){const l=Ce(r,n,o);t[o]?t[o].p(l,s):(t[o]=De(l),t[o].c(),t[o].m(e,null))}for(;o<t.length;o+=1)t[o].d(1);t.length=n.length}},d(r){r&&T(e),Ae(t,r)}}}function De(a){let e,n,t,r,s=a[10].name+"",o,l,c,h,b=a[10].location+"",p,N,m,i='<i class="bi bi-pencil-square"></i>',$,y,L;function v(){return a[5](a[10])}return{c(){e=g("li"),n=g("div"),t=g("span"),r=g("span"),o=x(s),l=g("br"),c=S(),h=g("small"),p=x(b),N=S(),m=g("button"),m.innerHTML=i,$=S(),this.h()},l(d){e=_(d,"LI",{class:!0});var w=q(e);n=_(w,"DIV",{class:!0});var C=q(n);t=_(C,"SPAN",{});var B=q(t);r=_(B,"SPAN",{});var j=q(r);o=X(j,s),j.forEach(T),l=_(B,"BR",{}),c=M(B),h=_(B,"SMALL",{class:!0});var U=q(h);p=X(U,b),U.forEach(T),B.forEach(T),N=M(C),m=_(C,"BUTTON",{class:!0,"data-svelte-h":!0}),O(m)!=="svelte-2vtu6m"&&(m.innerHTML=i),C.forEach(T),$=M(w),w.forEach(T),this.h()},h(){u(h,"class","fw-lighter"),u(m,"class","btn btn-link"),u(n,"class","d-flex justify-content-between align-items-center"),u(e,"class","list-group-item")},m(d,w){A(d,e,w),f(e,n),f(n,t),f(t,r),f(r,o),f(t,l),f(t,c),f(t,h),f(h,p),f(n,N),f(n,m),f(e,$),y||(L=V(m,"click",v),y=!0)},p(d,w){a=d,w&1&&s!==(s=a[10].name+"")&&ie(o,s),w&1&&b!==(b=a[10].location+"")&&ie(p,b)},d(d){d&&T(e),y=!1,L()}}}function Xe(a){let e;function n(s,o){return s[0]?.length?We:Je}let t=n(a),r=t(a);return{c(){r.c(),e=$e()},l(s){r.l(s),e=$e()},m(s,o){r.m(s,o),A(s,e,o)},p(s,[o]){t===(t=n(s))&&r?r.p(s,o):(r.d(1),r=t(s),r&&(r.c(),r.m(e.parentNode,e)))},i:P,o:P,d(s){s&&T(e),r.d(s)}}}function xe(a){return a?a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"):""}function et(a,e,n){let t;const{stores:{data:r},actions:{reload:s}}=le();let{query:o=""}=e,l=[],c=[];const h=r.subscribe(m=>{n(0,l=m),n(3,c=[...m])}),b=ve(),p=m=>{b("tournamentClick",{value:m})};Ve(s),Ue(h);const N=m=>p(m);return a.$$set=m=>{"query"in m&&n(2,o=m.query)},a.$$.update=()=>{a.$$.dirty&4&&n(4,t=xe(o?.trim().toLowerCase())),a.$$.dirty&29&&(o?n(0,l=l.filter(m=>m.name.trim().toLowerCase().match(t.trim().toLowerCase())||m.location.trim().toLowerCase().match(t.trim().toLowerCase()))):n(0,l=[...c]))},[l,p,o,c,t,N]}class tt extends te{constructor(e){super(),ne(this,e,et,Xe,ee,{query:2})}}function nt(a){let e,n,t='<i class="bi bi-plus"></i>',r,s,o,l,c,h='<i class="bi bi-search"></i>',b,p;return{c(){e=g("div"),n=g("button"),n.innerHTML=t,r=S(),s=g("div"),o=g("input"),l=S(),c=g("span"),c.innerHTML=h,this.h()},l(N){e=_(N,"DIV",{class:!0});var m=q(e);n=_(m,"BUTTON",{class:!0,"data-svelte-h":!0}),O(n)!=="svelte-1vene98"&&(n.innerHTML=t),r=M(m),s=_(m,"DIV",{class:!0});var i=q(s);o=_(i,"INPUT",{type:!0,class:!0,placeholder:!0,"aria-label":!0,"aria-describedby":!0}),l=M(i),c=_(i,"SPAN",{class:!0,id:!0,"data-svelte-h":!0}),O(c)!=="svelte-nl1ps3"&&(c.innerHTML=h),i.forEach(T),m.forEach(T),this.h()},h(){u(n,"class","btn btn-primary"),u(o,"type","text"),u(o,"class","form-control"),u(o,"placeholder","Search"),u(o,"aria-label","search"),u(o,"aria-describedby","search"),u(c,"class","input-group-text"),u(c,"id","search"),u(s,"class","input-group"),u(e,"class","d-flex justify-content-between gap-3")},m(N,m){A(N,e,m),f(e,n),f(e,r),f(e,s),f(s,o),z(o,a[0]),f(s,l),f(s,c),b||(p=[V(n,"click",a[1]),V(o,"input",a[2])],b=!0)},p(N,[m]){m&1&&o.value!==N[0]&&z(o,N[0])},i:P,o:P,d(N){N&&T(e),b=!1,He(p)}}}function rt(a,e,n){let{query:t}=e;const r=ve(),s=()=>{r("triggerCreate")};function o(){t=this.value,n(0,t)}return a.$$set=l=>{"query"in l&&n(0,t=l.query)},[t,s,o]}class at extends te{constructor(e){super(),ne(this,e,rt,nt,ee,{query:0})}}function Ee(a){let e,n=a[2].tournamentName+"",t;return{c(){e=g("div"),t=x(n),this.h()},l(r){e=_(r,"DIV",{class:!0});var s=q(e);t=X(s,n),s.forEach(T),this.h()},h(){u(e,"class","text-danger")},m(r,s){A(r,e,s),f(e,t)},p(r,s){s&4&&n!==(n=r[2].tournamentName+"")&&ie(t,n)},d(r){r&&T(e)}}}function Ie(a){let e,n=a[2].tournamentLocation+"",t;return{c(){e=g("div"),t=x(n),this.h()},l(r){e=_(r,"DIV",{class:!0});var s=q(e);t=X(s,n),s.forEach(T),this.h()},h(){u(e,"class","text-danger")},m(r,s){A(r,e,s),f(e,t)},p(r,s){s&4&&n!==(n=r[2].tournamentLocation+"")&&ie(t,n)},d(r){r&&T(e)}}}function Me(a){let e,n='<i class="bi bi-trash"></i>',t,r;return{c(){e=g("button"),e.innerHTML=n,this.h()},l(s){e=_(s,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),O(e)!=="svelte-71v1xh"&&(e.innerHTML=n),this.h()},h(){u(e,"type","button"),u(e,"class","btn btn-danger")},m(s,o){A(s,e,o),t||(r=V(e,"click",a[7]),t=!0)},p:P,d(s){s&&T(e),t=!1,r()}}}function ot(a){let e,n,t,r,s="Tournament Name",o,l,c,h,b,p,N="Tournament Location",m,i,$,y,L,v,d,w,C,B='<i class="bi bi-x"></i>',j,U,Te='<i class="bi bi-floppy"></i>',fe,ye,D=a[2].tournamentName&&Ee(a),E=a[2].tournamentLocation&&Ie(a),I=a[0].id&&Me(a);return{c(){e=g("form"),n=g("div"),t=g("div"),r=g("label"),r.textContent=s,o=S(),l=g("input"),c=S(),D&&D.c(),h=S(),b=g("div"),p=g("label"),p.textContent=N,m=S(),i=g("input"),$=S(),E&&E.c(),y=S(),L=g("div"),v=g("div"),I&&I.c(),d=S(),w=g("div"),C=g("button"),C.innerHTML=B,j=S(),U=g("button"),U.innerHTML=Te,this.h()},l(k){e=_(k,"FORM",{class:!0});var H=q(e);n=_(H,"DIV",{class:!0});var re=q(n);t=_(re,"DIV",{class:!0});var F=q(t);r=_(F,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),O(r)!=="svelte-ws3hkc"&&(r.textContent=s),o=M(F),l=_(F,"INPUT",{id:!0,type:!0,name:!0,class:!0,placeholder:!0}),c=M(F),D&&D.l(F),F.forEach(T),h=M(re),b=_(re,"DIV",{class:!0});var R=q(b);p=_(R,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),O(p)!=="svelte-11uz0q0"&&(p.textContent=N),m=M(R),i=_(R,"INPUT",{id:!0,type:!0,name:!0,class:!0,placeholder:!0}),$=M(R),E&&E.l(R),R.forEach(T),re.forEach(T),y=M(H),L=_(H,"DIV",{class:!0});var we=q(L);v=_(we,"DIV",{class:!0});var ae=q(v);I&&I.l(ae),d=M(ae),w=_(ae,"DIV",{class:!0});var oe=q(w);C=_(oe,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),O(C)!=="svelte-1v3uc8o"&&(C.innerHTML=B),j=M(oe),U=_(oe,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),O(U)!=="svelte-1y10wq9"&&(U.innerHTML=Te),oe.forEach(T),ae.forEach(T),we.forEach(T),H.forEach(T),this.h()},h(){u(r,"for","tournamentName"),u(r,"class","form-label"),u(l,"id","tournamentName"),u(l,"type","text"),u(l,"name","tournamentName"),u(l,"class","form-control"),u(l,"placeholder",""),u(t,"class","d-flex flex-column gap-1"),u(p,"for","tournamentLocation"),u(p,"class","form-label"),u(i,"id","tournamentLocation"),u(i,"type","text"),u(i,"name","tournamentLocation"),u(i,"class","form-control"),u(i,"placeholder",""),u(b,"class","d-flex flex-column gap-1"),u(n,"class","flex-fill overflow-auto d-flex flex-column gap-3"),u(C,"type","button"),u(C,"class","btn btn-secondary"),u(U,"type","submit"),u(U,"class","btn btn-primary"),u(w,"class","d-flex flex-row gap-3"),u(v,"class","d-flex gap-3"),se(v,"justify-content-between",a[0].id),se(v,"justify-content-end",!a[0].id),u(L,"class","flex-shrink-0"),u(e,"class","h-100 d-flex flex-column flex-fill")},m(k,H){A(k,e,H),f(e,n),f(n,t),f(t,r),f(t,o),f(t,l),z(l,a[1].tournamentName),f(t,c),D&&D.m(t,null),f(n,h),f(n,b),f(b,p),f(b,m),f(b,i),z(i,a[1].tournamentLocation),f(b,$),E&&E.m(b,null),f(e,y),f(e,L),f(L,v),I&&I.m(v,null),f(v,d),f(v,w),f(w,C),f(w,j),f(w,U),fe||(ye=[V(l,"input",a[5]),V(l,"blur",a[5]),V(l,"input",a[11]),V(i,"input",a[5]),V(i,"blur",a[5]),V(i,"input",a[12]),V(C,"click",a[8]),V(e,"submit",Be(a[6]))],fe=!0)},p(k,[H]){H&2&&l.value!==k[1].tournamentName&&z(l,k[1].tournamentName),k[2].tournamentName?D?D.p(k,H):(D=Ee(k),D.c(),D.m(t,null)):D&&(D.d(1),D=null),H&2&&i.value!==k[1].tournamentLocation&&z(i,k[1].tournamentLocation),k[2].tournamentLocation?E?E.p(k,H):(E=Ie(k),E.c(),E.m(b,null)):E&&(E.d(1),E=null),k[0].id?I?I.p(k,H):(I=Me(k),I.c(),I.m(v,d)):I&&(I.d(1),I=null),H&1&&se(v,"justify-content-between",k[0].id),H&1&&se(v,"justify-content-end",!k[0].id)},i:P,o:P,d(k){k&&T(e),D&&D.d(),E&&E.d(),I&&I.d(),fe=!1,He(ye)}}}let st="";function lt(a,e,n){let t,r;const s={id:0,name:"",location:""};let{drawerId:o=""}=e,{tournament:l=s}=e,c=0;const h=ve(),b=Re().shape({tournamentName:qe().required("Tournament name is required"),tournamentLocation:qe()}),{form:p,errors:N,handleChange:m,handleSubmit:i}=ze({initialValues:{tournamentName:l.name,tournamentLocation:l.location},validationSchema:b,onSubmit:d=>{l.id&&d.tournamentName&&d.tournamentLocation?h("update",{value:{id:l.id,name:d.tournamentName,location:d.tournamentLocation}}):!l.id&&d.tournamentName&&d.tournamentLocation&&h("create",{value:{name:d.tournamentName,location:d.tournamentLocation}})}});Le(a,p,d=>n(1,t=d)),Le(a,N,d=>n(2,r=d));const $=()=>{h("delete",{value:l.id})},y=()=>{const d=`[data-bs-target="#${o}"]`,w=document.querySelector(d);w&&(n(0,l={id:0,name:"",location:""}),w?.click())};function L(){t.tournamentName=this.value,p.set(t)}function v(){t.tournamentLocation=this.value,p.set(t)}return a.$$set=d=>{"drawerId"in d&&n(9,o=d.drawerId),"tournament"in d&&n(0,l=d.tournament)},a.$$.update=()=>{a.$$.dirty&1025&&(l.id!==c||l.name!==st)&&(Ne(p,t.tournamentName=l.name,t),Ne(p,t.tournamentLocation=l.location,t),n(10,c=l?.id??0))},[l,t,r,p,N,m,i,$,y,o,c,L,v]}class it extends te{constructor(e){super(),ne(this,e,lt,ot,ee,{drawerId:9,tournament:0})}}function ut(a){let e,n,t;function r(o){a[7](o)}let s={drawerId:ue};return a[0]!==void 0&&(s.tournament=a[0]),e=new it({props:s}),pe.push(()=>_e(e,"tournament",r)),e.$on("create",a[4]),e.$on("update",a[5]),e.$on("delete",a[6]),{c(){J(e.$$.fragment)},l(o){Z(e.$$.fragment,o)},m(o,l){Y(e,o,l),t=!0},p(o,l){const c={};!n&&l&1&&(n=!0,c.tournament=o[0],he(()=>n=!1)),e.$set(c)},i(o){t||(Q(e.$$.fragment,o),t=!0)},o(o){K(e.$$.fragment,o),t=!1},d(o){G(e,o)}}}function ct(a){let e,n,t,r,s,o,l,c,h;e=new je({props:{title:"Tournament",id:ue,$$slots:{default:[ut]},$$scope:{ctx:a}}});function b(i){a[8](i)}let p={};a[1]!==void 0&&(p.query=a[1]),r=new at({props:p}),pe.push(()=>_e(r,"query",b)),r.$on("triggerCreate",a[2]);function N(i){a[9](i)}let m={};return a[1]!==void 0&&(m.query=a[1]),l=new tt({props:m}),pe.push(()=>_e(l,"query",N)),l.$on("tournamentClick",a[3]),{c(){J(e.$$.fragment),n=S(),t=g("div"),J(r.$$.fragment),o=S(),J(l.$$.fragment),this.h()},l(i){Z(e.$$.fragment,i),n=M(i),t=_(i,"DIV",{class:!0});var $=q(t);Z(r.$$.fragment,$),o=M($),Z(l.$$.fragment,$),$.forEach(T),this.h()},h(){u(t,"class","d-flex flex-column gap-3")},m(i,$){Y(e,i,$),A(i,n,$),A(i,t,$),Y(r,t,null),f(t,o),Y(l,t,null),h=!0},p(i,[$]){const y={};$&8193&&(y.$$scope={dirty:$,ctx:i}),e.$set(y);const L={};!s&&$&2&&(s=!0,L.query=i[1],he(()=>s=!1)),r.$set(L);const v={};!c&&$&2&&(c=!0,v.query=i[1],he(()=>c=!1)),l.$set(v)},i(i){h||(Q(e.$$.fragment,i),Q(r.$$.fragment,i),Q(l.$$.fragment,i),h=!0)},o(i){K(e.$$.fragment,i),K(r.$$.fragment,i),K(l.$$.fragment,i),h=!1},d(i){i&&(T(n),T(t)),G(e,i),G(r),G(l)}}}const ue="tournament-drawer";function mt(a,e,n){let t,r;const s=()=>{const y=`[data-bs-target="#${ue}"]`,L=document.querySelector(y);L&&L.click()},o=()=>{Fe(ue)},l={id:0,name:"",location:""},c=()=>{n(0,t=l),o()},h=y=>{const{detail:L}=y;n(0,t=L?.value),console.log("selectedTournament",t),o()},b=async y=>{const{detail:L}=y,v=L.value;if(v){const{actions:{createTournament:d,reload:w}}=le();await d(v),await w()}s()},p=async y=>{const{detail:L}=y,v=L?.value,d=v?.id;if(d){const{actions:{updateTournament:w,reload:C}}=le();await w(d,v),await C()}s()},N=async y=>{const{detail:L}=y,v=L?.value;if(v){const{actions:{deleteTournament:d,reload:w}}=le();await d(v),await w()}s()};function m(y){t=y,n(0,t)}function i(y){r=y,n(1,r)}function $(y){r=y,n(1,r)}return[t,r,c,h,b,p,N,m,i,$]}class ft extends te{constructor(e){super(),ne(this,e,mt,ct,ee,{})}}function dt(a){let e,n;return e=new ft({}),{c(){J(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){Y(e,t,r),n=!0},i(t){n||(Q(e.$$.fragment,t),n=!0)},o(t){K(e.$$.fragment,t),n=!1},d(t){G(e,t)}}}function pt(a){let e,n;return e=new Oe({props:{pageTitle:"Tournaments",$$slots:{default:[dt]},$$scope:{ctx:a}}}),{c(){J(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){Y(e,t,r),n=!0},p(t,[r]){const s={};r&1&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(Q(e.$$.fragment,t),n=!0)},o(t){K(e.$$.fragment,t),n=!1},d(t){G(e,t)}}}class $t extends te{constructor(e){super(),ne(this,e,null,pt,ee,{})}}export{$t as component,wt as universal};
