import{z as el,s as Qe,n as Ee,d as g,i as $,B as Vt,Y as kt,y as tl,Z as rl,L as ke,b as o,e as m,o as T,h as p,p as oe,t as se,l as de,m as s,H as F,q as N,f as K,v as S,r as ll,I as j,a1 as _e,S as Be,w as He,a2 as je,K as lt,_ as il,$ as ol,G as Me,a0 as Te}from"../chunks/CQU11sYc.js";import{S as We,i as Ye,f as Le,d as Ue,t as $e,a as Fe,m as ze,b as Ge,e as Ke}from"../chunks/ygo1-g9T.js";import{P as sl}from"../chunks/B1Akiuqc.js";import{e as ie}from"../chunks/BN2EK-kY.js";import{w as Tt,d as cl}from"../chunks/3Nn_4NU5.js";import{s as it,c as ul,a as Et,d as nt,b as dl}from"../chunks/Bd48NFI8.js";import{g as nl}from"../chunks/D4iFRpCC.js";import{g as al}from"../chunks/b0Y4oEyv.js";import{D as fl,o as _l}from"../chunks/DqsuVaXf.js";const hl=!0,Rl=Object.freeze(Object.defineProperty({__proto__:null,prerender:hl},Symbol.toStringTag,{value:"Module"})),Lt=Tt([]);let Mt=!1;async function ot(){if(Mt)return el(Lt);Mt=!0;const t=`
	    id,
    player1_id,
    player2_id,
    winner_id,
    tournament_id,
    round,
    location,
    date,
    created_at,

    tournaments (
      name,
      location
    ),
    player1:player1_id (
      name
    ),
    player2:player2_id (
      name
    ),
    winner:winner_id (
      name
    )
	`,{data:e,error:n}=await it.from("matches").select(t).order("date",{ascending:!1});if(n)throw n;const l=(e??[]).map(a=>({...a,tournaments:a.tournaments??[],player1:a.player1??[],player2:a.player2??[],winner:a.winner??[]}));return Lt.set(l),setTimeout(()=>Mt=!1,800),l}async function ml(t){const{data:e,error:n}=await it.from("matches").insert([t]).select();if(n)throw n;return await ot(),e[0]}async function pl(t,e){const{error:n}=await it.from("matches").update(e).eq("id",t);if(n)throw n;await ot();const a=el(Lt).find(r=>r.id===t);return a||void 0}async function vl(t){const{error:e}=await it.from("matches").delete().eq("id",t);if(e)throw e;await ot()}let Re=null;const gl=()=>{const t=Tt([]),e=Tt(void 0),n=cl([t,e],([h,b])=>{if(h?.length&&b)return h.find(y=>y.id===b)});return Re={stores:{data:t,currentMatchId:e,currentMatch:n},actions:{reload:async()=>{const h=await ot();t.set(h)},createMatch:async h=>{try{await ml(h)}catch(b){console.error(b)}},updateMatch:async(h,b)=>{try{await pl(h,b)}catch(y){console.error(y)}},deleteMatch:async h=>{try{await vl(h)}catch(b){console.error(b)}}}},Re},at=()=>(Re||(Re=gl()),Re);function At(t,e,n){const l=t.slice();return l[13]=e[n],l}function bl(t){let e;return{c(){e=se("No Data Found")},l(n){e=oe(n,"No Data Found")},m(n,l){$(n,e,l)},p:Ee,d(n){n&&g(e)}}}function yl(t){let e,n=ie(t[0]),l=[];for(let a=0;a<n.length;a+=1)l[a]=Bt(At(t,n,a));return{c(){e=p("ul");for(let a=0;a<l.length;a+=1)l[a].c();this.h()},l(a){e=m(a,"UL",{class:!0});var r=T(e);for(let i=0;i<l.length;i+=1)l[i].l(r);r.forEach(g),this.h()},h(){o(e,"class","list-group")},m(a,r){$(a,e,r);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null)},p(a,r){if(r&3){n=ie(a[0]);let i;for(i=0;i<n.length;i+=1){const h=At(a,n,i);l[i]?l[i].p(h,r):(l[i]=Bt(h),l[i].c(),l[i].m(e,null))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length}},d(a){a&&g(e),ke(l,a)}}}function Bt(t){let e,n,l,a,r=t[13]?.date+"",i,h,b,y=t[13]?.player1?.name+"",V,I,M,q="vs",z,C=t[13]?.player2?.name+"",w,E,A,P=t[13]?.tournaments?.name+"",D,G,c,_='<i class="bi bi-pencil-square"></i>',k,L,v;function O(){return t[6](t[13])}return{c(){e=p("li"),n=p("div"),l=p("div"),a=p("small"),i=se(r),h=S(),b=p("div"),V=se(y),I=S(),M=p("em"),M.textContent=q,z=S(),w=se(C),E=S(),A=p("small"),D=se(P),G=S(),c=p("button"),c.innerHTML=_,k=S(),this.h()},l(d){e=m(d,"LI",{class:!0});var B=T(e);n=m(B,"DIV",{class:!0});var fe=T(n);l=m(fe,"DIV",{});var U=T(l);a=m(U,"SMALL",{class:!0});var R=T(a);i=oe(R,r),R.forEach(g),h=N(U),b=m(U,"DIV",{});var Q=T(b);V=oe(Q,y),I=N(Q),M=m(Q,"EM",{"data-svelte-h":!0}),K(M)!=="svelte-1ytjshd"&&(M.textContent=q),z=N(Q),w=oe(Q,C),Q.forEach(g),E=N(U),A=m(U,"SMALL",{class:!0});var Ie=T(A);D=oe(Ie,P),Ie.forEach(g),U.forEach(g),G=N(fe),c=m(fe,"BUTTON",{class:!0,"data-svelte-h":!0}),K(c)!=="svelte-10nsr6g"&&(c.innerHTML=_),fe.forEach(g),k=N(B),B.forEach(g),this.h()},h(){o(a,"class","fw-lighter"),o(A,"class","fw-lighter"),o(c,"class","btn btn-link"),o(n,"class","d-flex justify-content-between align-items-start"),o(e,"class","list-group-item")},m(d,B){$(d,e,B),s(e,n),s(n,l),s(l,a),s(a,i),s(l,h),s(l,b),s(b,V),s(b,I),s(b,M),s(b,z),s(b,w),s(l,E),s(l,A),s(A,D),s(n,G),s(n,c),s(e,k),L||(v=F(c,"click",O),L=!0)},p(d,B){t=d,B&1&&r!==(r=t[13]?.date+"")&&de(i,r),B&1&&y!==(y=t[13]?.player1?.name+"")&&de(V,y),B&1&&C!==(C=t[13]?.player2?.name+"")&&de(w,C),B&1&&P!==(P=t[13]?.tournaments?.name+"")&&de(D,P)},d(d){d&&g(e),L=!1,v()}}}function wl(t){let e;function n(r,i){return r[0]?.length?yl:bl}let l=n(t),a=l(t);return{c(){a.c(),e=Vt()},l(r){a.l(r),e=Vt()},m(r,i){a.m(r,i),$(r,e,i)},p(r,[i]){l===(l=n(r))&&a?a.p(r,i):(a.d(1),a=l(r),a&&(a.c(),a.m(e.parentNode,e)))},i:Ee,o:Ee,d(r){r&&g(e),a.d(r)}}}function Cl(t){return t?t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"):""}function El(t,e,n){let l;const{stores:{data:a},actions:{reload:r}}=at();let{query:i=""}=e,{player_id:h=0}=e,{tournament_id:b=0}=e,y=[],V=[];const I=a.subscribe(w=>{n(0,y=w),n(5,V=[...w])}),M=kt(),q=w=>{M("matchClick",{value:w})},z=(w,E,A)=>{let P=[...y];return w&&(P=P.filter(D=>{const G=D?.tournaments?.name?.trim().toLowerCase().match(l.trim().toLowerCase()),c=D?.player1?.name?.trim().toLowerCase().match(l.trim().toLowerCase()),_=D?.player2?.name?.trim().toLowerCase().match(l.trim().toLowerCase()),k=D?.winner?.name?.trim().toLowerCase().match(l.trim().toLowerCase());return G||c||_||k})),E&&(P=P.filter(D=>D.player1_id===E||D.player2_id===E)),A&&(P=P.filter(D=>D.tournament_id===A)),P};tl(r),rl(I);const C=w=>q(w);return t.$$set=w=>{"query"in w&&n(2,i=w.query),"player_id"in w&&n(3,h=w.player_id),"tournament_id"in w&&n(4,b=w.tournament_id)},t.$$.update=()=>{t.$$.dirty&4&&(l=Cl(i?.trim().toLowerCase())),t.$$.dirty&60&&(i||h||b?n(0,y=z(i,h,b)):n(0,y=[...V]))},[y,q,i,h,b,V,C]}class Ml extends We{constructor(e){super(),Ye(this,e,El,wl,Qe,{query:2,player_id:3,tournament_id:4})}}function Ht(t,e,n){const l=t.slice();return l[14]=e[n],l}function jt(t,e,n){const l=t.slice();return l[17]=e[n],l}function Ut(t){let e,n=t[17].name+"",l,a;return{c(){e=p("option"),l=se(n),this.h()},l(r){e=m(r,"OPTION",{});var i=T(e);l=oe(i,n),i.forEach(g),this.h()},h(){e.__value=a=t[17].id,j(e,e.__value)},m(r,i){$(r,e,i),s(e,l)},p(r,i){i&8&&n!==(n=r[17].name+"")&&de(l,n),i&8&&a!==(a=r[17].id)&&(e.__value=a,j(e,e.__value))},d(r){r&&g(e)}}}function $t(t){let e,n=t[14].name+"",l,a;return{c(){e=p("option"),l=se(n),this.h()},l(r){e=m(r,"OPTION",{});var i=T(e);l=oe(i,n),i.forEach(g),this.h()},h(){e.__value=a=t[14].id,j(e,e.__value)},m(r,i){$(r,e,i),s(e,l)},p(r,i){i&16&&n!==(n=r[14].name+"")&&de(l,n),i&16&&a!==(a=r[14].id)&&(e.__value=a,j(e,e.__value))},d(r){r&&g(e)}}}function Tl(t){let e,n,l='<i class="bi bi-plus"></i>',a,r,i,h,b,y='<i class="bi bi-search"></i>',V,I,M,q,z="Tournament",C,w,E,A,P="Players",D,G,c=ie(t[3]),_=[];for(let v=0;v<c.length;v+=1)_[v]=Ut(jt(t,c,v));let k=ie(t[4]),L=[];for(let v=0;v<k.length;v+=1)L[v]=$t(Ht(t,k,v));return{c(){e=p("div"),n=p("button"),n.innerHTML=l,a=S(),r=p("div"),i=p("input"),h=S(),b=p("span"),b.innerHTML=y,V=S(),I=p("div"),M=p("select"),q=p("option"),q.textContent=z;for(let v=0;v<_.length;v+=1)_[v].c();C=S(),w=p("div"),E=p("select"),A=p("option"),A.textContent=P;for(let v=0;v<L.length;v+=1)L[v].c();this.h()},l(v){e=m(v,"DIV",{class:!0});var O=T(e);n=m(O,"BUTTON",{class:!0,"data-svelte-h":!0}),K(n)!=="svelte-1vene98"&&(n.innerHTML=l),a=N(O),r=m(O,"DIV",{class:!0});var d=T(r);i=m(d,"INPUT",{type:!0,class:!0,placeholder:!0,"aria-label":!0,"aria-describedby":!0}),h=N(d),b=m(d,"SPAN",{class:!0,id:!0,"data-svelte-h":!0}),K(b)!=="svelte-nl1ps3"&&(b.innerHTML=y),d.forEach(g),O.forEach(g),V=N(v),I=m(v,"DIV",{class:!0});var B=T(I);M=m(B,"SELECT",{class:!0,"aria-label":!0});var fe=T(M);q=m(fe,"OPTION",{"data-svelte-h":!0}),K(q)!=="svelte-dccae4"&&(q.textContent=z);for(let Q=0;Q<_.length;Q+=1)_[Q].l(fe);fe.forEach(g),B.forEach(g),C=N(v),w=m(v,"DIV",{class:!0});var U=T(w);E=m(U,"SELECT",{class:!0,"aria-label":!0});var R=T(E);A=m(R,"OPTION",{"data-svelte-h":!0}),K(A)!=="svelte-79ot39"&&(A.textContent=P);for(let Q=0;Q<L.length;Q+=1)L[Q].l(R);R.forEach(g),U.forEach(g),this.h()},h(){o(n,"class","btn btn-primary"),o(i,"type","text"),o(i,"class","form-control"),o(i,"placeholder","Search"),o(i,"aria-label","search"),o(i,"aria-describedby","search"),o(b,"class","input-group-text"),o(b,"id","search"),o(r,"class","input-group"),o(e,"class","d-flex justify-content-between gap-3"),q.selected=!0,q.__value=0,j(q,q.__value),o(M,"class","form-select"),o(M,"aria-label",""),t[2]===void 0&&Be(()=>t[9].call(M)),o(I,"class","d-flex justify-content-between gap-3"),A.selected=!0,A.__value=0,j(A,A.__value),o(E,"class","form-select"),o(E,"aria-label",""),t[1]===void 0&&Be(()=>t[10].call(E)),o(w,"class","d-flex justify-content-between gap-3")},m(v,O){$(v,e,O),s(e,n),s(e,a),s(e,r),s(r,i),j(i,t[0]),s(r,h),s(r,b),$(v,V,O),$(v,I,O),s(I,M),s(M,q);for(let d=0;d<_.length;d+=1)_[d]&&_[d].m(M,null);_e(M,t[2],!0),$(v,C,O),$(v,w,O),s(w,E),s(E,A);for(let d=0;d<L.length;d+=1)L[d]&&L[d].m(E,null);_e(E,t[1],!0),D||(G=[F(n,"click",t[5]),F(i,"input",t[8]),F(M,"change",t[9]),F(E,"change",t[10])],D=!0)},p(v,[O]){if(O&1&&i.value!==v[0]&&j(i,v[0]),O&8){c=ie(v[3]);let d;for(d=0;d<c.length;d+=1){const B=jt(v,c,d);_[d]?_[d].p(B,O):(_[d]=Ut(B),_[d].c(),_[d].m(M,null))}for(;d<_.length;d+=1)_[d].d(1);_.length=c.length}if(O&12&&_e(M,v[2]),O&16){k=ie(v[4]);let d;for(d=0;d<k.length;d+=1){const B=Ht(v,k,d);L[d]?L[d].p(B,O):(L[d]=$t(B),L[d].c(),L[d].m(E,null))}for(;d<L.length;d+=1)L[d].d(1);L.length=k.length}O&18&&_e(E,v[1])},i:Ee,o:Ee,d(v){v&&(g(e),g(V),g(I),g(C),g(w)),ke(_,v),ke(L,v),D=!1,ll(G)}}}function Ll(t,e,n){let l,a,{query:r}=e,{player_id:i}=e,{tournament_id:h}=e;const b=kt(),y=()=>{b("triggerCreate")},{stores:{data:V},actions:{reload:I}}=al();He(t,V,E=>n(3,l=E));const{stores:{data:M},actions:{reload:q}}=nl();He(t,M,E=>n(4,a=E)),tl(async()=>{await I(),await q()});function z(){r=this.value,n(0,r)}function C(){h=je(this),n(2,h)}function w(){i=je(this),n(1,i)}return t.$$set=E=>{"query"in E&&n(0,r=E.query),"player_id"in E&&n(1,i=E.player_id),"tournament_id"in E&&n(2,h=E.tournament_id)},[r,i,h,l,a,y,V,M,z,C,w]}class kl extends We{constructor(e){super(),Ye(this,e,Ll,Tl,Qe,{query:0,player_id:1,tournament_id:2})}}function Ft(t,e,n){const l=t.slice();return l[25]=e[n],l}function zt(t,e,n){const l=t.slice();return l[25]=e[n],l}function Gt(t,e,n){const l=t.slice();return l[30]=e[n],l}function Kt(t,e,n){const l=t.slice();return l[25]=e[n],l}function Rt(t){let e,n=t[25].name+"",l,a;return{c(){e=p("option"),l=se(n),this.h()},l(r){e=m(r,"OPTION",{});var i=T(e);l=oe(i,n),i.forEach(g),this.h()},h(){e.__value=a=t[25].id,j(e,e.__value)},m(r,i){$(r,e,i),s(e,l)},p(r,i){i[0]&4&&n!==(n=r[25].name+"")&&de(l,n),i[0]&4&&a!==(a=r[25].id)&&(e.__value=a,j(e,e.__value))},d(r){r&&g(e)}}}function Qt(t){let e,n=t[30].name+"",l,a;return{c(){e=p("option"),l=se(n),this.h()},l(r){e=m(r,"OPTION",{});var i=T(e);l=oe(i,n),i.forEach(g),this.h()},h(){e.__value=a=t[30].id,j(e,e.__value)},m(r,i){$(r,e,i),s(e,l)},p(r,i){i[0]&8&&n!==(n=r[30].name+"")&&de(l,n),i[0]&8&&a!==(a=r[30].id)&&(e.__value=a,j(e,e.__value))},d(r){r&&g(e)}}}function Wt(t){let e,n=t[25].name+"",l,a;return{c(){e=p("option"),l=se(n),this.h()},l(r){e=m(r,"OPTION",{});var i=T(e);l=oe(i,n),i.forEach(g),this.h()},h(){e.__value=a=t[25].id,j(e,e.__value)},m(r,i){$(r,e,i),s(e,l)},p(r,i){i[0]&4&&n!==(n=r[25].name+"")&&de(l,n),i[0]&4&&a!==(a=r[25].id)&&(e.__value=a,j(e,e.__value))},d(r){r&&g(e)}}}function Yt(t){let e,n=t[25].name+"",l,a;return{c(){e=p("option"),l=se(n),this.h()},l(r){e=m(r,"OPTION",{});var i=T(e);l=oe(i,n),i.forEach(g),this.h()},h(){e.__value=a=t[25].id,j(e,e.__value)},m(r,i){$(r,e,i),s(e,l)},p(r,i){i[0]&4&&n!==(n=r[25].name+"")&&de(l,n),i[0]&4&&a!==(a=r[25].id)&&(e.__value=a,j(e,e.__value))},d(r){r&&g(e)}}}function Zt(t){let e,n=t[4].date+"",l;return{c(){e=p("div"),l=se(n),this.h()},l(a){e=m(a,"DIV",{class:!0});var r=T(e);l=oe(r,n),r.forEach(g),this.h()},h(){o(e,"class","text-danger")},m(a,r){$(a,e,r),s(e,l)},p(a,r){r[0]&16&&n!==(n=a[4].date+"")&&de(l,n)},d(a){a&&g(e)}}}function Jt(t){let e,n=t[4].round+"",l;return{c(){e=p("div"),l=se(n),this.h()},l(a){e=m(a,"DIV",{class:!0});var r=T(e);l=oe(r,n),r.forEach(g),this.h()},h(){o(e,"class","text-danger")},m(a,r){$(a,e,r),s(e,l)},p(a,r){r[0]&16&&n!==(n=a[4].round+"")&&de(l,n)},d(a){a&&g(e)}}}function Xt(t){let e,n=t[4].location+"",l;return{c(){e=p("div"),l=se(n),this.h()},l(a){e=m(a,"DIV",{class:!0});var r=T(e);l=oe(r,n),r.forEach(g),this.h()},h(){o(e,"class","text-danger")},m(a,r){$(a,e,r),s(e,l)},p(a,r){r[0]&16&&n!==(n=a[4].location+"")&&de(l,n)},d(a){a&&g(e)}}}function xt(t){let e,n='<i class="bi bi-trash"></i>',l,a;return{c(){e=p("button"),e.innerHTML=n,this.h()},l(r){e=m(r,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),K(e)!=="svelte-71v1xh"&&(e.innerHTML=n),this.h()},h(){o(e,"type","button"),o(e,"class","btn btn-danger")},m(r,i){$(r,e,i),l||(a=F(e,"click",t[11]),l=!0)},p:Ee,d(r){r&&g(e),l=!1,a()}}}function Il(t){let e,n,l,a,r="Winner",i,h,b,y="Player",V,I,M,q="Tournament",z,C,w,E="Tournament",A,P,D,G="Player 1",c,_,k,L="Player",v,O,d,B="Player 2",fe,U,R,Q="Player",Ie,he,ge,It="Date",st,ce,ct,ut,me,be,Dt="Round",dt,ae,ft,_t,pe,ye,Ot="Location",ht,re,mt,pt,De,ue,Ze,we,ve,qt='<i class="bi bi-x"></i>',vt,Ce,Pt='<i class="bi bi-floppy"></i>',gt,Nt,Oe=ie(t[2]),W=[];for(let f=0;f<Oe.length;f+=1)W[f]=Rt(Kt(t,Oe,f));let qe=ie(t[3]),Y=[];for(let f=0;f<qe.length;f+=1)Y[f]=Qt(Gt(t,qe,f));let Pe=ie(t[2]),Z=[];for(let f=0;f<Pe.length;f+=1)Z[f]=Wt(zt(t,Pe,f));let Ne=ie(t[2]),J=[];for(let f=0;f<Ne.length;f+=1)J[f]=Yt(Ft(t,Ne,f));let X=t[4].date&&Zt(t),x=t[4].round&&Jt(t),ee=t[4].location&&Xt(t),te=t[0].id&&xt(t);return{c(){e=p("form"),n=p("div"),l=p("div"),a=p("label"),a.textContent=r,i=S(),h=p("select"),b=p("option"),b.textContent=y;for(let f=0;f<W.length;f+=1)W[f].c();V=S(),I=p("div"),M=p("label"),M.textContent=q,z=S(),C=p("select"),w=p("option"),w.textContent=E;for(let f=0;f<Y.length;f+=1)Y[f].c();A=S(),P=p("div"),D=p("label"),D.textContent=G,c=S(),_=p("select"),k=p("option"),k.textContent=L;for(let f=0;f<Z.length;f+=1)Z[f].c();v=S(),O=p("div"),d=p("label"),d.textContent=B,fe=S(),U=p("select"),R=p("option"),R.textContent=Q;for(let f=0;f<J.length;f+=1)J[f].c();Ie=S(),he=p("div"),ge=p("label"),ge.textContent=It,st=S(),ce=p("input"),ct=S(),X&&X.c(),ut=S(),me=p("div"),be=p("label"),be.textContent=Dt,dt=S(),ae=p("input"),ft=S(),x&&x.c(),_t=S(),pe=p("div"),ye=p("label"),ye.textContent=Ot,ht=S(),re=p("input"),mt=S(),ee&&ee.c(),pt=S(),De=p("div"),ue=p("div"),te&&te.c(),Ze=S(),we=p("div"),ve=p("button"),ve.innerHTML=qt,vt=S(),Ce=p("button"),Ce.innerHTML=Pt,this.h()},l(f){e=m(f,"FORM",{class:!0});var H=T(e);n=m(H,"DIV",{class:!0});var u=T(n);l=m(u,"DIV",{class:!0});var le=T(l);a=m(le,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),K(a)!=="svelte-1k1n3m2"&&(a.textContent=r),i=N(le),h=m(le,"SELECT",{id:!0,name:!0,class:!0,"aria-label":!0});var bt=T(h);b=m(bt,"OPTION",{"data-svelte-h":!0}),K(b)!=="svelte-1pwafry"&&(b.textContent=y);for(let ne=0;ne<W.length;ne+=1)W[ne].l(bt);bt.forEach(g),le.forEach(g),V=N(u),I=m(u,"DIV",{class:!0});var Je=T(I);M=m(Je,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),K(M)!=="svelte-1iectm2"&&(M.textContent=q),z=N(Je),C=m(Je,"SELECT",{id:!0,name:!0,class:!0,"aria-label":!0});var yt=T(C);w=m(yt,"OPTION",{"data-svelte-h":!0}),K(w)!=="svelte-dccae4"&&(w.textContent=E);for(let ne=0;ne<Y.length;ne+=1)Y[ne].l(yt);yt.forEach(g),Je.forEach(g),A=N(u),P=m(u,"DIV",{class:!0});var Xe=T(P);D=m(Xe,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),K(D)!=="svelte-gttrzg"&&(D.textContent=G),c=N(Xe),_=m(Xe,"SELECT",{id:!0,name:!0,class:!0,"aria-label":!0});var wt=T(_);k=m(wt,"OPTION",{"data-svelte-h":!0}),K(k)!=="svelte-1pwafry"&&(k.textContent=L);for(let ne=0;ne<Z.length;ne+=1)Z[ne].l(wt);wt.forEach(g),Xe.forEach(g),v=N(u),O=m(u,"DIV",{class:!0});var xe=T(O);d=m(xe,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),K(d)!=="svelte-hx7hs8"&&(d.textContent=B),fe=N(xe),U=m(xe,"SELECT",{id:!0,name:!0,class:!0,"aria-label":!0});var Ct=T(U);R=m(Ct,"OPTION",{"data-svelte-h":!0}),K(R)!=="svelte-1pwafry"&&(R.textContent=Q);for(let ne=0;ne<J.length;ne+=1)J[ne].l(Ct);Ct.forEach(g),xe.forEach(g),Ie=N(u),he=m(u,"DIV",{class:!0});var Se=T(he);ge=m(Se,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),K(ge)!=="svelte-1jy0m8a"&&(ge.textContent=It),st=N(Se),ce=m(Se,"INPUT",{id:!0,type:!0,name:!0,class:!0,placeholder:!0}),ct=N(Se),X&&X.l(Se),Se.forEach(g),ut=N(u),me=m(u,"DIV",{class:!0});var Ve=T(me);be=m(Ve,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),K(be)!=="svelte-1d16suy"&&(be.textContent=Dt),dt=N(Ve),ae=m(Ve,"INPUT",{id:!0,type:!0,name:!0,class:!0,placeholder:!0}),ft=N(Ve),x&&x.l(Ve),Ve.forEach(g),_t=N(u),pe=m(u,"DIV",{class:!0});var Ae=T(pe);ye=m(Ae,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),K(ye)!=="svelte-18vqoy4"&&(ye.textContent=Ot),ht=N(Ae),re=m(Ae,"INPUT",{id:!0,type:!0,name:!0,class:!0,placeholder:!0}),mt=N(Ae),ee&&ee.l(Ae),Ae.forEach(g),u.forEach(g),pt=N(H),De=m(H,"DIV",{class:!0});var St=T(De);ue=m(St,"DIV",{class:!0});var et=T(ue);te&&te.l(et),Ze=N(et),we=m(et,"DIV",{class:!0});var tt=T(we);ve=m(tt,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),K(ve)!=="svelte-1v3uc8o"&&(ve.innerHTML=qt),vt=N(tt),Ce=m(tt,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),K(Ce)!=="svelte-1y10wq9"&&(Ce.innerHTML=Pt),tt.forEach(g),et.forEach(g),St.forEach(g),H.forEach(g),this.h()},h(){o(a,"for","winner_id"),o(a,"class","form-label"),b.selected=!0,b.__value=0,j(b,b.__value),o(h,"id","winner_id"),o(h,"name","winner_id"),o(h,"class","form-select"),o(h,"aria-label",""),t[1].winner_id===void 0&&Be(()=>t[15].call(h)),o(l,"class","d-flex flex-column gap-1"),o(M,"for","tournament_id"),o(M,"class","form-label"),w.selected=!0,w.__value=0,j(w,w.__value),o(C,"id","tournament_id"),o(C,"name","tournament_id"),o(C,"class","form-select"),o(C,"aria-label",""),t[1].tournament_id===void 0&&Be(()=>t[16].call(C)),o(I,"class","d-flex flex-column gap-1"),o(D,"for","player1_id"),o(D,"class","form-label"),k.selected=!0,k.__value=0,j(k,k.__value),o(_,"id","player1_id"),o(_,"name","player1_id"),o(_,"class","form-select"),o(_,"aria-label",""),t[1].player1_id===void 0&&Be(()=>t[17].call(_)),o(P,"class","d-flex flex-column gap-1"),o(d,"for","player2_id"),o(d,"class","form-label"),R.selected=!0,R.__value=0,j(R,R.__value),o(U,"id","player2_id"),o(U,"name","player2_id"),o(U,"class","form-select"),o(U,"aria-label",""),t[1].player2_id===void 0&&Be(()=>t[18].call(U)),o(O,"class","d-flex flex-column gap-1"),o(ge,"for","date"),o(ge,"class","form-label"),o(ce,"id","date"),o(ce,"type","date"),o(ce,"name","date"),o(ce,"class","form-control"),o(ce,"placeholder",""),o(he,"class","d-flex flex-column gap-1"),o(be,"for","round"),o(be,"class","form-label"),o(ae,"id","round"),o(ae,"type","text"),o(ae,"name","round"),o(ae,"class","form-control"),o(ae,"placeholder",""),o(me,"class","d-flex flex-column gap-1"),o(ye,"for","location"),o(ye,"class","form-label"),o(re,"id","location"),o(re,"type","text"),o(re,"name","location"),o(re,"class","form-control"),o(re,"placeholder",""),o(pe,"class","d-flex flex-column gap-1"),o(n,"class","flex-fill overflow-auto d-flex flex-column gap-3"),o(ve,"type","button"),o(ve,"class","btn btn-secondary"),o(Ce,"type","submit"),o(Ce,"class","btn btn-primary"),o(we,"class","d-flex flex-row gap-3"),o(ue,"class","d-flex gap-3"),lt(ue,"justify-content-between",t[0].id),lt(ue,"justify-content-end",!t[0].id),o(De,"class","flex-shrink-0"),o(e,"class","h-100 d-flex flex-column flex-fill")},m(f,H){$(f,e,H),s(e,n),s(n,l),s(l,a),s(l,i),s(l,h),s(h,b);for(let u=0;u<W.length;u+=1)W[u]&&W[u].m(h,null);_e(h,t[1].winner_id,!0),s(n,V),s(n,I),s(I,M),s(I,z),s(I,C),s(C,w);for(let u=0;u<Y.length;u+=1)Y[u]&&Y[u].m(C,null);_e(C,t[1].tournament_id,!0),s(n,A),s(n,P),s(P,D),s(P,c),s(P,_),s(_,k);for(let u=0;u<Z.length;u+=1)Z[u]&&Z[u].m(_,null);_e(_,t[1].player1_id,!0),s(n,v),s(n,O),s(O,d),s(O,fe),s(O,U),s(U,R);for(let u=0;u<J.length;u+=1)J[u]&&J[u].m(U,null);_e(U,t[1].player2_id,!0),s(n,Ie),s(n,he),s(he,ge),s(he,st),s(he,ce),j(ce,t[1].date),s(he,ct),X&&X.m(he,null),s(n,ut),s(n,me),s(me,be),s(me,dt),s(me,ae),j(ae,t[1].round),s(me,ft),x&&x.m(me,null),s(n,_t),s(n,pe),s(pe,ye),s(pe,ht),s(pe,re),j(re,t[1].location),s(pe,mt),ee&&ee.m(pe,null),s(e,pt),s(e,De),s(De,ue),te&&te.m(ue,null),s(ue,Ze),s(ue,we),s(we,ve),s(we,vt),s(we,Ce),gt||(Nt=[F(h,"change",t[15]),F(C,"change",t[16]),F(_,"change",t[17]),F(U,"change",t[18]),F(ce,"input",t[9]),F(ce,"blur",t[9]),F(ce,"input",t[19]),F(ae,"input",t[9]),F(ae,"blur",t[9]),F(ae,"input",t[20]),F(re,"input",t[9]),F(re,"blur",t[9]),F(re,"input",t[21]),F(ve,"click",t[12]),F(e,"submit",il(t[10]))],gt=!0)},p(f,H){if(H[0]&4){Oe=ie(f[2]);let u;for(u=0;u<Oe.length;u+=1){const le=Kt(f,Oe,u);W[u]?W[u].p(le,H):(W[u]=Rt(le),W[u].c(),W[u].m(h,null))}for(;u<W.length;u+=1)W[u].d(1);W.length=Oe.length}if(H[0]&6&&_e(h,f[1].winner_id),H[0]&8){qe=ie(f[3]);let u;for(u=0;u<qe.length;u+=1){const le=Gt(f,qe,u);Y[u]?Y[u].p(le,H):(Y[u]=Qt(le),Y[u].c(),Y[u].m(C,null))}for(;u<Y.length;u+=1)Y[u].d(1);Y.length=qe.length}if(H[0]&6&&_e(C,f[1].tournament_id),H[0]&4){Pe=ie(f[2]);let u;for(u=0;u<Pe.length;u+=1){const le=zt(f,Pe,u);Z[u]?Z[u].p(le,H):(Z[u]=Wt(le),Z[u].c(),Z[u].m(_,null))}for(;u<Z.length;u+=1)Z[u].d(1);Z.length=Pe.length}if(H[0]&6&&_e(_,f[1].player1_id),H[0]&4){Ne=ie(f[2]);let u;for(u=0;u<Ne.length;u+=1){const le=Ft(f,Ne,u);J[u]?J[u].p(le,H):(J[u]=Yt(le),J[u].c(),J[u].m(U,null))}for(;u<J.length;u+=1)J[u].d(1);J.length=Ne.length}H[0]&6&&_e(U,f[1].player2_id),H[0]&6&&j(ce,f[1].date),f[4].date?X?X.p(f,H):(X=Zt(f),X.c(),X.m(he,null)):X&&(X.d(1),X=null),H[0]&6&&ae.value!==f[1].round&&j(ae,f[1].round),f[4].round?x?x.p(f,H):(x=Jt(f),x.c(),x.m(me,null)):x&&(x.d(1),x=null),H[0]&6&&re.value!==f[1].location&&j(re,f[1].location),f[4].location?ee?ee.p(f,H):(ee=Xt(f),ee.c(),ee.m(pe,null)):ee&&(ee.d(1),ee=null),f[0].id?te?te.p(f,H):(te=xt(f),te.c(),te.m(ue,Ze)):te&&(te.d(1),te=null),H[0]&1&&lt(ue,"justify-content-between",f[0].id),H[0]&1&&lt(ue,"justify-content-end",!f[0].id)},i:Ee,o:Ee,d(f){f&&g(e),ke(W,f),ke(Y,f),ke(Z,f),ke(J,f),X&&X.d(),x&&x.d(),ee&&ee.d(),te&&te.d(),gt=!1,ll(Nt)}}}function Dl(t,e,n){let l,a,r,i;const h={id:0,player1_id:0,player2_id:0,winner_id:0,tournament_id:0,round:"",location:"",date:""};let{drawerId:b=""}=e,{match:y=h}=e,V=0;const I=kt(),{stores:{data:M}}=nl();He(t,M,d=>n(2,a=d));const{stores:{data:q}}=al();He(t,q,d=>n(3,r=d));const z=ul().shape({player1_id:nt(),player2_id:nt(),winner_id:nt(),tournament_id:nt(),round:Et(),location:Et(),date:Et()}),{form:C,errors:w,handleChange:E,handleSubmit:A}=dl({initialValues:h,validationSchema:z,onSubmit:d=>{let B={player1_id:d.player1_id,player2_id:d.player2_id,tournament_id:d.tournament_id,round:d.round,location:d.location,date:d.date};d.winner_id&&(B.winner_id=d.winner_id),y.id?(B.id=y.id,I("update",{value:B})):y.id||I("create",{value:B})}});He(t,C,d=>n(1,l=d)),He(t,w,d=>n(4,i=d));const P=()=>{I("delete",{value:y.id})},D=()=>{const d=`[data-bs-target="#${b}"]`,B=document.querySelector(d);B&&(n(0,y=h),B?.click())};function G(){l.winner_id=je(this),C.set(l)}function c(){l.tournament_id=je(this),C.set(l)}function _(){l.player1_id=je(this),C.set(l)}function k(){l.player2_id=je(this),C.set(l)}function L(){l.date=this.value,C.set(l)}function v(){l.round=this.value,C.set(l)}function O(){l.location=this.value,C.set(l)}return t.$$set=d=>{"drawerId"in d&&n(13,b=d.drawerId),"match"in d&&n(0,y=d.match)},t.$$.update=()=>{t.$$.dirty[0]&16385&&y.id!==V&&(ol(C,l={...y},l),n(14,V=y?.id??0))},[y,l,a,r,i,M,q,C,w,E,A,P,D,b,V,G,c,_,k,L,v,O]}class Ol extends We{constructor(e){super(),Ye(this,e,Dl,Il,Qe,{drawerId:13,match:0},null,[-1,-1])}}function ql(t){let e,n,l;function a(i){t[9](i)}let r={drawerId:rt};return t[0]!==void 0&&(r.match=t[0]),e=new Ol({props:r}),Me.push(()=>Le(e,"match",a)),e.$on("create",t[6]),e.$on("update",t[7]),e.$on("delete",t[8]),{c(){Ke(e.$$.fragment)},l(i){Ge(e.$$.fragment,i)},m(i,h){ze(e,i,h),l=!0},p(i,h){const b={};!n&&h&1&&(n=!0,b.match=i[0],Te(()=>n=!1)),e.$set(b)},i(i){l||(Fe(e.$$.fragment,i),l=!0)},o(i){$e(e.$$.fragment,i),l=!1},d(i){Ue(e,i)}}}function Pl(t){let e,n,l,a,r,i,h,b,y,V,I,M,q;e=new fl({props:{title:"Match",id:rt,$$slots:{default:[ql]},$$scope:{ctx:t}}});function z(c){t[10](c)}function C(c){t[11](c)}function w(c){t[12](c)}let E={};t[1]!==void 0&&(E.query=t[1]),t[2]!==void 0&&(E.player_id=t[2]),t[3]!==void 0&&(E.tournament_id=t[3]),a=new kl({props:E}),Me.push(()=>Le(a,"query",z)),Me.push(()=>Le(a,"player_id",C)),Me.push(()=>Le(a,"tournament_id",w)),a.$on("triggerCreate",t[4]);function A(c){t[13](c)}function P(c){t[14](c)}function D(c){t[15](c)}let G={};return t[1]!==void 0&&(G.query=t[1]),t[2]!==void 0&&(G.player_id=t[2]),t[3]!==void 0&&(G.tournament_id=t[3]),y=new Ml({props:G}),Me.push(()=>Le(y,"query",A)),Me.push(()=>Le(y,"player_id",P)),Me.push(()=>Le(y,"tournament_id",D)),y.$on("matchClick",t[5]),{c(){Ke(e.$$.fragment),n=S(),l=p("div"),Ke(a.$$.fragment),b=S(),Ke(y.$$.fragment),this.h()},l(c){Ge(e.$$.fragment,c),n=N(c),l=m(c,"DIV",{class:!0});var _=T(l);Ge(a.$$.fragment,_),b=N(_),Ge(y.$$.fragment,_),_.forEach(g),this.h()},h(){o(l,"class","d-flex flex-column gap-3")},m(c,_){ze(e,c,_),$(c,n,_),$(c,l,_),ze(a,l,null),s(l,b),ze(y,l,null),q=!0},p(c,[_]){const k={};_&524289&&(k.$$scope={dirty:_,ctx:c}),e.$set(k);const L={};!r&&_&2&&(r=!0,L.query=c[1],Te(()=>r=!1)),!i&&_&4&&(i=!0,L.player_id=c[2],Te(()=>i=!1)),!h&&_&8&&(h=!0,L.tournament_id=c[3],Te(()=>h=!1)),a.$set(L);const v={};!V&&_&2&&(V=!0,v.query=c[1],Te(()=>V=!1)),!I&&_&4&&(I=!0,v.player_id=c[2],Te(()=>I=!1)),!M&&_&8&&(M=!0,v.tournament_id=c[3],Te(()=>M=!1)),y.$set(v)},i(c){q||(Fe(e.$$.fragment,c),Fe(a.$$.fragment,c),Fe(y.$$.fragment,c),q=!0)},o(c){$e(e.$$.fragment,c),$e(a.$$.fragment,c),$e(y.$$.fragment,c),q=!1},d(c){c&&(g(n),g(l)),Ue(e,c),Ue(a),Ue(y)}}}const rt="match-drawer";function Nl(t,e,n){let l,a,r,i;const h=()=>{const c=`[data-bs-target="#${rt}"]`,_=document.querySelector(c);_&&_.click()},b=()=>{_l(rt)},y={id:0,player1_id:0,player2_id:0,winner_id:0,tournament_id:0,round:"",location:"",date:""},V=()=>{n(0,l=y),b()},I=c=>{const{detail:_}=c;n(0,l=_?.value),b()},M=async c=>{const{detail:_}=c,k=_.value;if(k){const{actions:{createMatch:L,reload:v}}=at();await L(k),await v()}h()},q=async c=>{const{detail:_}=c,k=_?.value,L=k?.id;if(L){const{actions:{updateMatch:v,reload:O}}=at();await v(L,k),await O()}h()},z=async c=>{const{detail:_}=c,k=_?.value;if(k){const{actions:{deleteMatch:L,reload:v}}=at();await L(k),await v()}h()};function C(c){l=c,n(0,l)}function w(c){a=c,n(1,a)}function E(c){r=c,n(2,r)}function A(c){i=c,n(3,i)}function P(c){a=c,n(1,a)}function D(c){r=c,n(2,r)}function G(c){i=c,n(3,i)}return[l,a,r,i,V,I,M,q,z,C,w,E,A,P,D,G]}class Sl extends We{constructor(e){super(),Ye(this,e,Nl,Pl,Qe,{})}}function Vl(t){let e,n;return e=new Sl({}),{c(){Ke(e.$$.fragment)},l(l){Ge(e.$$.fragment,l)},m(l,a){ze(e,l,a),n=!0},i(l){n||(Fe(e.$$.fragment,l),n=!0)},o(l){$e(e.$$.fragment,l),n=!1},d(l){Ue(e,l)}}}function Al(t){let e,n;return e=new sl({props:{pageTitle:"Matches",$$slots:{default:[Vl]},$$scope:{ctx:t}}}),{c(){Ke(e.$$.fragment)},l(l){Ge(e.$$.fragment,l)},m(l,a){ze(e,l,a),n=!0},p(l,[a]){const r={};a&1&&(r.$$scope={dirty:a,ctx:l}),e.$set(r)},i(l){n||(Fe(e.$$.fragment,l),n=!0)},o(l){$e(e.$$.fragment,l),n=!1},d(l){Ue(e,l)}}}class Ql extends We{constructor(e){super(),Ye(this,e,null,Al,Qe,{})}}export{Ql as component,Rl as universal};
